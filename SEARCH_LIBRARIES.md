# Библиотеки для поиска в Python

## Используемая библиотека: **Whoosh**

Проект использует **Whoosh** - чисто Python библиотеку для полнотекстового поиска.

### Преимущества Whoosh:
- ✅ **Чисто Python** - не требует внешних зависимостей или сервисов
- ✅ **Встроенная индексация** - автоматическое создание и управление индексами
- ✅ **Гибкие запросы** - поддержка фраз, wildcards, boolean операторов
- ✅ **Ранжирование результатов** - результаты сортируются по релевантности
- ✅ **Подсветка совпадений** - автоматическая подсветка найденных фрагментов
- ✅ **Легковесная** - не требует отдельного сервиса (в отличие от Elasticsearch)

### Установка:
```bash
pip install whoosh==2.7.4
```

### Использование в проекте:
- Модуль: `web/search_index_whoosh.py`
- Индекс хранится в: `DESCRIPTIONS_DIR/.whoosh_index/`
- API endpoint: `/api/search?q=query`

## Альтернативные библиотеки (не используются)

### 1. **Elasticsearch** (через elasticsearch-py)
- ✅ Очень мощная и масштабируемая
- ❌ Требует отдельный сервис/сервер
- ❌ Избыточна для небольших проектов
- ❌ Сложнее в настройке

### 2. **SQLite FTS (Full-Text Search)**
- ✅ Встроена в SQLite (если используется SQLite)
- ✅ Не требует дополнительных библиотек
- ❌ Менее гибкая, чем специализированные решения
- ❌ Ограниченные возможности ранжирования

### 3. **Meilisearch** (через meilisearch-python)
- ✅ Очень быстрая (написана на Rust)
- ✅ Простой API
- ❌ Требует отдельный сервис
- ❌ Менее популярна, чем Elasticsearch

### 4. **Xapian**
- ✅ Мощная библиотека с морфологическим анализом
- ✅ Поддержка русского языка
- ❌ Требует компиляцию C++ кода
- ❌ Сложнее в установке

### 5. **Tantivy** (через tantivy-py)
- ✅ Очень быстрая (Rust)
- ✅ Современная архитектура
- ❌ Менее зрелая экосистема
- ❌ Меньше документации

## Почему выбран Whoosh?

Для данного проекта Whoosh является оптимальным выбором, потому что:
1. Не требует внешних сервисов - все работает "из коробки"
2. Легко интегрируется - чисто Python код
3. Достаточно мощная для задач поиска по описаниям плагинов
4. Хорошо документирована и поддерживается
5. Подходит для средних объемов данных (тысячи плагинов)

## Перестроение индекса

Индекс автоматически перестраивается при первом поиске, если его нет.

Для ручного перестроения индекса:
```bash
POST /api/search/rebuild-index
```

Или через Python:
```python
from web.search_index_whoosh import WhooshSearchIndex
from scraper.metadata_store import MetadataStore

store = MetadataStore()
search_index = WhooshSearchIndex()
search_index.build_index(store)
```

